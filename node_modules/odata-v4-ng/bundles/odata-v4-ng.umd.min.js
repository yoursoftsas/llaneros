!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common/http"),require("angular2-uuid"),require("rxjs/operators"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("odata-v4-ng",["exports","@angular/common/http","angular2-uuid","rxjs/operators","@angular/core","@angular/common"],e):e(t["odata-v4-ng"]={},t.ng.common.http,null,t.rxjs.operators,t.ng.core,t.ng.common)}(this,function(t,p,e,T,r,n){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function I(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var o={EQ:0,NE:1,GT:2,GE:3,LT:4,LE:5,HAS:6};o[o.EQ]="EQ",o[o.NE]="NE",o[o.GT]="GT",o[o.GE]="GE",o[o.LT]="LT",o[o.LE]="LE",o[o.HAS]="HAS";var l={AND:0,OR:1,NOT:2};l[l.AND]="AND",l[l.OR]="OR",l[l.NOT]="NOT";var u={ADD:0,SUB:1,MUL:2,DIV:3,MOD:4};u[u.ADD]="ADD",u[u.SUB]="SUB",u[u.MUL]="MUL",u[u.DIV]="DIV",u[u.MOD]="MOD";var a=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t}(),_=function(){function E(){}return E.isNull=function(t){return null===t},E.isUndefined=function(t){return t===undefined},E.isNullOrUndefined=function(t){return E.isNull(t)||E.isUndefined(t)},E.isNotNullNorUndefined=function(t){return!E.isNull(t)&&!E.isUndefined(t)},E.isEmpty=function(t){if(E.isNullOrUndefined(t)||"string"==typeof t&&!t.length||t instanceof Array&&!t.length||"function"==typeof t.isEmpty&&t.isEmpty())return!0;if(t instanceof Array&&t){try{for(var e=I(t),n=e.next();!n.done;n=e.next()){var r=n.value;if(!E.isEmpty(r))return!1}}catch(T){i={error:T}}finally{try{n&&!n.done&&(o=e["return"])&&o.call(e)}finally{if(i)throw i.error}}return!0}return!1;var i,o},E.requireNull=function(t,e){if(null!==t)throw new Error(e+" must be null")},E.requireUndefined=function(t,e){if(t!==undefined)throw new Error(e+" must be undefined")},E.requireNotNull=function(t,e){if(null===t)throw new Error(e+" cannot be null")},E.requireNotUndefined=function(t,e){if(t===undefined)throw new Error(e+" cannot be undefined")},E.requireNotNullNorUndefined=function(t,e){E.requireNotNull(t,e),E.requireNotUndefined(t,e)},E.requireNullOrUndefined=function(t,e){if(!E.isNull(t)&&!E.isUndefined(t))throw new Error(e+" must be null or undefined")},E.requireNotEmpty=function(t,e){if(E.isEmpty(t))throw new Error(e+" cannot be empty")},E.requireNotNegative=function(t,e){if(t<0)throw new Error(e+" cannot be negative")},E.appendSegment=function(t,e){return E.requireNotNullNorUndefined(t,"path"),E.requireNotNullNorUndefined(e,"segment"),t.endsWith("/")||(t+="/"),t+e},E.removeEndingSeparator=function(t){return E.requireNotNullNorUndefined(t,"value"),t.endsWith("/")?1===t.length?"":t.substring(0,t.length-1):t},E.getValueURI=function(t,e){E.requireNotUndefined(t,"value"),E.requireNotNullNorUndefined(e,"encodeURI");var n=t;return"string"==typeof n?E.isNotNullNorUndefined(e)&&e&&(n=encodeURIComponent(n)):n instanceof a&&(n=n.toString().replace(/'/g,"''"),E.isNotNullNorUndefined(e)&&e&&(n=encodeURIComponent(n)),n="'"+n+"'"),n},E.toString=function(t,e,n){void 0===n&&(n=!1);var r,i,o="";if(E.isNullOrUndefined(t)||!t.length)return o;try{for(var T=I(t),s=T.next();!s.done;s=T.next()){var u=s.value;if(o.length)if(E.isNotNullNorUndefined(e))o+=" "+E.getOperatorString(e,n)+" ";else o+=",";if(E.isNotNullNorUndefined(e)&&e===l.NOT)o+=E.getOperatorString(e,n)+" ";o+=u}}catch(a){r={error:a}}finally{try{s&&!s.done&&(i=T["return"])&&i.call(T)}finally{if(r)throw r.error}}return E.isNotNullNorUndefined(e)?"("+o+")":o},E.getOperatorString=function(t,e){var n=l[t].toLowerCase();return E.isNotNullNorUndefined(e)&&e&&(n=n.toUpperCase()),n},E}(),E=function N(t,e){_.requireNotNullNorUndefined(t,"odataService"),_.requireNotNullNorUndefined(e,"serviceRoot"),_.requireNotEmpty(e,"serviceRoot"),this.odataService=t,this.serviceRoot=e,this.queryString=e},h={GET:0,POST:1,PUT:2,PATCH:3,DELETE:4};h[h.GET]="GET",h[h.POST]="POST",h[h.PUT]="PUT",h[h.PATCH]="PATCH",h[h.DELETE]="DELETE";var A=function c(t,e,n,r){this.method=t,this.odataQuery=e,this.body=n,this.httpOptions=r},d=function(r){function l(t,e){var n=r.call(this,t,e)||this;return _.requireNotNullNorUndefined(t,"odataService"),_.requireNotNullNorUndefined(e,"serviceRoot"),_.requireNotEmpty(e,"serviceRoot"),n.queryString=_.appendSegment(e,l.$BATCH),n.requests=[],n.batchBoundary=l.BATCH_PREFIX+n.getUUID(),n.changesetBoundary=null,n.changesetID=1,n}return s(l,r),l.prototype.get=function(t,e){return _.requireNotNullNorUndefined(t,"odataQuery"),this.requests.push(new A(h.GET,t,undefined,e)),this},l.prototype.post=function(t,e,n){return _.requireNotNullNorUndefined(t,"odataQuery"),this.requests.push(new A(h.POST,t,e,n)),this},l.prototype.put=function(t,e,n){return _.requireNotNullNorUndefined(t,"odataQuery"),this.requests.push(new A(h.PUT,t,e,n)),this},l.prototype.patch=function(t,e,n){return _.requireNotNullNorUndefined(t,"odataQuery"),this.requests.push(new A(h.PATCH,t,e,n)),this},l.prototype["delete"]=function(t,e){return _.requireNotNullNorUndefined(t,"odataQuery"),this.requests.push(new A(h.DELETE,t,undefined,e)),this},l.prototype.execute=function(t){return _.isNullOrUndefined(t)&&(t={}),_.isNullOrUndefined(t.headers)&&(t.headers=new p.HttpHeaders),t.headers=t.headers.set(l.ODATA_VERSION,l.VERSION_4_0),t.headers=t.headers.set(l.CONTENT_TYPE,l.MULTIPART_MIXED_BOUNDARY+this.batchBoundary),t.headers=t.headers.set(l.ACCEPT,l.MULTIPART_MIXED),this.odataService.post(this,this.getBody(),t)},l.prototype.toString=function(){return this.queryString},l.prototype.getBody=function(){var t,e,n="";try{for(var r=I(this.requests),i=r.next();!i.done;i=r.next()){var o=i.value,T=o.method,s=o.odataQuery,u=o.httpOptions,a=o.body;T===h.GET&&_.isNotNullNorUndefined(this.changesetBoundary)&&(n+=l.BOUNDARY_PREFIX_SUFFIX+this.changesetBoundary+l.BOUNDARY_PREFIX_SUFFIX+l.NEWLINE,this.changesetBoundary=null),_.isNullOrUndefined(this.changesetBoundary)&&(n+=l.BOUNDARY_PREFIX_SUFFIX+this.batchBoundary+l.NEWLINE),T!==h.GET&&(_.isNullOrUndefined(this.changesetBoundary)&&(this.changesetBoundary=l.CHANGESET_PREFIX+this.getUUID(),n+=l.CONTENT_TYPE+": "+l.MULTIPART_MIXED_BOUNDARY+this.changesetBoundary+l.NEWLINE,n+=l.NEWLINE),n+=l.BOUNDARY_PREFIX_SUFFIX+this.changesetBoundary+l.NEWLINE),n+=l.CONTENT_TYPE+": "+l.APPLICATION_HTTP+l.NEWLINE,n+=l.CONTENT_TRANSFER_ENCODING+": "+l.BINARY+l.NEWLINE,T!==h.GET&&(n+=l.CONTENT_ID+": "+this.changesetID+++l.NEWLINE),n+=l.NEWLINE,n+=h[T]+" "+s+" "+l.HTTP11+l.NEWLINE,n+=this.getHeaders(T,u),n+=l.NEWLINE,T===h.GET||T===h.DELETE?n+=l.NEWLINE:n+=JSON.stringify(a)+l.NEWLINE}}catch(E){t={error:E}}finally{try{i&&!i.done&&(e=r["return"])&&e.call(r)}finally{if(t)throw t.error}}return n.length&&(_.isNotNullNorUndefined(this.changesetBoundary)&&(n+=l.BOUNDARY_PREFIX_SUFFIX+this.changesetBoundary+l.BOUNDARY_PREFIX_SUFFIX+l.NEWLINE,this.changesetBoundary=null),n+=l.BOUNDARY_PREFIX_SUFFIX+this.batchBoundary+l.BOUNDARY_PREFIX_SUFFIX),n},l.prototype.getHeaders=function(t,e){var n,r,i="";if(t!==h.POST&&t!==h.PATCH&&t!==h.PUT||(i+=l.CONTENT_TYPE+": "+l.APPLICATION_JSON+l.NEWLINE),_.isNullOrUndefined(e)||_.isNullOrUndefined(e.headers))return i;try{for(var o=I(e.headers.keys()),T=o.next();!T.done;T=o.next()){var s=T.value;i+=s+": "+e.headers.getAll(s)+l.NEWLINE}}catch(u){n={error:u}}finally{try{T&&!T.done&&(r=o["return"])&&r.call(o)}finally{if(n)throw n.error}}return i},l.prototype.getUUID=function(){return e.UUID.UUID()},l.BOUNDARY_PREFIX_SUFFIX="--",l.BATCH_PREFIX="batch_",l.CHANGESET_PREFIX="changeset_",l.NEWLINE="\r\n",l.$BATCH="$batch",l.HTTP11="HTTP/1.1",l.ODATA_VERSION="OData-Version",l.CONTENT_TYPE="Content-Type",l.ACCEPT="Accept",l.CONTENT_TRANSFER_ENCODING="Content-Transfer-Encoding",l.CONTENT_ID="Content-ID",l.VERSION_4_0="4.0",l.MULTIPART_MIXED="multipart/mixed",l.MULTIPART_MIXED_BOUNDARY="multipart/mixed;boundary=",l.APPLICATION_HTTP="application/http",l.BINARY="binary",l.APPLICATION_JSON="application/json",l}(E),f=function(){function t(t){_.requireNotNullNorUndefined(t,"filter"),_.requireNotEmpty(t,"filter"),this.filter=t}return t.prototype.toString=function(){return this.filter},t.prototype.isEmpty=function(){return _.isNullOrUndefined(this.filter)||!this.filter.length},t}(),R=function(){function e(t){_.requireNotNullNorUndefined(t,"entitySet"),_.requireNotEmpty(t,"entitySet"),this.entitySet=t,this.queryOptions=new O(e.SEPARATOR)}return e.prototype.select=function(t){return this.queryOptions.select(t),this},e.prototype.filter=function(t){return this.queryOptions.filter(t),this},e.prototype.expand=function(t){return this.queryOptions.expand(t),this},e.prototype.orderby=function(t){return this.queryOptions.orderby(t),this},e.prototype.search=function(t){return this.queryOptions.search(t),this},e.prototype.skip=function(t){return this.queryOptions.skip(t),this},e.prototype.top=function(t){return this.queryOptions.top(t),this},e.prototype.customOption=function(t,e){return this.queryOptions.customOption(t,e),this},e.prototype.toString=function(){var t=this.entitySet;return _.isEmpty(this.queryOptions)||(t+="("+this.queryOptions+")"),t},e.prototype.isEmpty=function(){return _.isEmpty(this.entitySet)},e.SEPARATOR=";",e}(),y={ASC:0,DESC:1};y[y.ASC]="ASC",y[y.DESC]="DESC";var U=function(){function t(t,e){_.requireNotNullNorUndefined(t,"property"),this.property=t,this.order=e}return t.prototype.toString=function(){var t=this.property;return _.isNullOrUndefined(this.order)||(t+=" "+y[this.order].toLowerCase()),t},t}(),O=function(){function t(t){_.requireNotNullNorUndefined(t,"separator"),_.requireNotEmpty(t,"separator"),this._separator=t,this._select=null,this._filter=null,this._expand=null,this._orderby=null,this._search=null,this._skip=null,this._top=null,this._count=null,this._customOptions=null,this._format=null}return t.prototype.select=function(t){return _.isNullOrUndefined(t)||_.isEmpty(t)?this._select=null:this._select="string"==typeof t?[t]:t,this},t.prototype.filter=function(t){return _.isNullOrUndefined(t)||_.isEmpty(t)?this._filter=null:this._filter="string"==typeof t?new f(t):t,this},t.prototype.expand=function(t){return _.isNullOrUndefined(t)||_.isEmpty(t)?this._expand=null:this._expand="string"==typeof t?[new R(t)]:t instanceof R?[t]:t,this},t.prototype.orderby=function(t){return _.isNullOrUndefined(t)||_.isEmpty(t)?this._orderby=null:this._orderby="string"==typeof t?[new U(t)]:t,this},t.prototype.search=function(t){return this._search=t,this},t.prototype.skip=function(t){return _.requireNotNegative(t,"skip"),this._skip=t,this},t.prototype.top=function(t){return _.requireNotNegative(t,"top"),this._top=t,this},t.prototype.count=function(t){return this._count=t,this},t.prototype.format=function(t){return this._format=t,this},t.prototype.customOption=function(t,e){return _.requireNotNullNorUndefined(t,"key"),_.isNullOrUndefined(this._customOptions)&&(this._customOptions=new Map),this._customOptions.set(t,e),this},t.prototype.toString=function(){var r=this,i="";return _.isNullOrUndefined(this._select)||_.isEmpty(this._select)||(i+="$select=","string"==typeof this._select?i+=this._select:i+=_.toString(this._select)),_.isNullOrUndefined(this._filter)||_.isEmpty(this._filter)||(i.length&&(i+=this._separator),i+="$filter="+encodeURIComponent(this._filter.toString())),_.isNullOrUndefined(this._expand)||_.isEmpty(this._expand)||(i.length&&(i+=this._separator),i+="$expand=","string"==typeof this._expand?i+=this._expand:i+=_.toString(this._expand)),_.isNullOrUndefined(this._orderby)||_.isEmpty(this._orderby)||(i.length&&(i+=this._separator),i+="$orderby=","string"==typeof this._orderby?i+=this._orderby:i+=_.toString(this._orderby)),_.isNullOrUndefined(this._search)||_.isEmpty(this._search)||(i.length&&(i+=this._separator),i+="$search="+encodeURIComponent(this._search.toString())),_.isNullOrUndefined(this._skip)||_.isEmpty(this._skip)||(i.length&&(i+=this._separator),i+="$skip="+this._skip),_.isNullOrUndefined(this._top)||_.isEmpty(this._top)||(i.length&&(i+=this._separator),i+="$top="+this._top),_.isNullOrUndefined(this._count)||_.isEmpty(this._count)||(i.length&&(i+=this._separator),i+="$count="+this._count),_.isNotNullNorUndefined(this._customOptions)&&0<this._customOptions.size&&this._customOptions.forEach(function(t,e,n){_.isNotNullNorUndefined(e)&&!_.isEmpty(e)&&_.isNotNullNorUndefined(t)&&!_.isEmpty(t)&&(i.length&&(i+=r._separator),i+=e+"="+encodeURIComponent(t))}),_.isNullOrUndefined(this._format)||_.isEmpty(this._format)||(i.length&&(i+=this._separator),i+="$format="+this._format),i},t.prototype.isEmpty=function(){for(var t in this)if("_purpose"!==t&&"_separator"!==t&&this.hasOwnProperty(t)&&!_.isEmpty(this[t]))return!1;return!0},t}(),g=function(r){function i(t,e){var n=r.call(this,t,e)||this;return _.requireNotNullNorUndefined(t,"odataService"),_.requireNotNullNorUndefined(e,"serviceRoot"),_.requireNotEmpty(e,"serviceRoot"),n.queryOptions=new O(i.SEPARATOR),n.segments=[],n.lastSegment=null,n}return s(i,r),i.prototype.metadata=function(){if(_.requireNullOrUndefined(this.getSegment(i.METADATA),i.METADATA),this.segments.length)throw new Error("metadata segment cannot be appended to other segments");return this.queryString=_.appendSegment(this.queryString,i.$METADATA),this.addSegment(i.METADATA),this},i.prototype.entitySet=function(t){return _.requireNullOrUndefined(this.getSegment(i.ENTITY_SET),i.ENTITY_SET),_.requireNotNullNorUndefined(t,"entitySet"),_.requireNotEmpty(t,"entitySet"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.ENTITY_SET),this},i.prototype.entityKey=function(t){if(this.lastSegment!==i.ENTITY_SET&&this.lastSegment!==i.NAVIGATION_PROPERTY)throw new Error("entityKey can only be appended to entitySet or navigationProperty");return _.requireNotNullNorUndefined(t,"entityKey"),_.requireNotEmpty(t,"entityKey"),t=_.getValueURI(t,!0),this.queryString=_.removeEndingSeparator(this.queryString)+"("+t+")",this.addSegment(i.ENTITY_KEY),this},i.prototype.singleton=function(t){if(this.segments.length)throw new Error("singleton segment cannot be appended to other segments");return _.requireNotNullNorUndefined(t,"singleton"),_.requireNotEmpty(t,"singleton"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.SINGLETON),this},i.prototype.typeName=function(t){if(this.lastSegment!==i.ENTITY_SET&&this.lastSegment!==i.NAVIGATION_PROPERTY&&this.lastSegment!==i.ENTITY_KEY)throw new Error("typeName can only be appended to entitySet, navigationProperty or entityKey");return _.requireNotNullNorUndefined(t,"typeName"),_.requireNotEmpty(t,"typeName"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.TYPE_NAME),this},i.prototype.property=function(t){if(_.requireNullOrUndefined(this.getSegment(i.PROPERTY),i.PROPERTY),this.lastSegment!==i.ENTITY_KEY&&this.lastSegment!==i.SINGLETON)throw new Error("property can only be appended to entityKey or singleton");return _.requireNotNullNorUndefined(t,"property"),_.requireNotEmpty(t,"property"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.PROPERTY),this},i.prototype.navigationProperty=function(t){if(this.lastSegment!==i.ENTITY_KEY&&this.lastSegment!==i.SINGLETON&&this.lastSegment!==i.TYPE_NAME)throw new Error("navigationProperty can only be appended to entityKey, singleton or typeName");return _.requireNotNullNorUndefined(t,"navigationProperty"),_.requireNotEmpty(t,"navigationProperty"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.NAVIGATION_PROPERTY),this},i.prototype.ref=function(){if(_.requireNullOrUndefined(this.getSegment(i.REF),i.REF),this.lastSegment!==i.NAVIGATION_PROPERTY)throw new Error("ref can only be appended to navigationProperty");return this.queryString=_.appendSegment(this.queryString,i.$REF),this.addSegment(i.REF),this},i.prototype.value=function(){if(_.requireNullOrUndefined(this.getSegment(i.VALUE),i.VALUE),this.lastSegment!==i.PROPERTY)throw new Error("value can only be appended to property");return this.queryString=_.appendSegment(this.queryString,i.$VALUE),this.addSegment(i.VALUE),this},i.prototype.countSegment=function(){if(_.requireNullOrUndefined(this.getSegment(i.COUNT),i.COUNT),this.lastSegment!==i.ENTITY_SET&&this.lastSegment!==i.NAVIGATION_PROPERTY)throw new Error("count can only be appended to entitySet or navigationProperty");return this.queryString=_.appendSegment(this.queryString,i.$COUNT),this.addSegment(i.COUNT),this},i.prototype.functionCall=function(t){return _.requireNotNullNorUndefined(t,"functionCall"),_.requireNotEmpty(t,"functionCall"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.FUNCTION_CALL),this},i.prototype.actionCall=function(t){return _.requireNotNullNorUndefined(t,"actionCall"),_.requireNotEmpty(t,"actionCall"),this.queryString=_.appendSegment(this.queryString,t),this.addSegment(i.ACTION_CALL),this},i.prototype.batch=function(){return new d(this.odataService,this.serviceRoot)},i.prototype.select=function(t){return this.queryOptions.select(t),this},i.prototype.filter=function(t){return this.queryOptions.filter(t),this},i.prototype.expand=function(t){return this.queryOptions.expand(t),this},i.prototype.orderby=function(t){return this.queryOptions.orderby(t),this},i.prototype.search=function(t){return this.queryOptions.search(t),this},i.prototype.skip=function(t){return this.queryOptions.skip(t),this},i.prototype.top=function(t){return this.queryOptions.top(t),this},i.prototype.countOption=function(t){return this.queryOptions.count(t),this},i.prototype.customOption=function(t,e){return this.queryOptions.customOption(t,e),this},i.prototype.format=function(t){return this.queryOptions.format(t),this},i.prototype.get=function(t){return this.odataService.get(this,t)},i.prototype.post=function(t,e){return this.odataService.post(this,t,e)},i.prototype.patch=function(t,e,n){return this.odataService.patch(this,t,e,n)},i.prototype.put=function(t,e,n){return this.odataService.put(this,t,e,n)},i.prototype["delete"]=function(t,e){return this.odataService["delete"](this,t,e)},i.prototype.toString=function(){var t=this.queryString;return _.isNotNullNorUndefined(this.queryOptions)&&!this.queryOptions.isEmpty()&&(t+="?"+this.queryOptions.toString()),t},i.prototype.getSegment=function(r){return _.requireNotNull(r,"segment"),this.segments.find(function(t,e,n){return t===r})},i.prototype.addSegment=function(t){_.requireNotNull(t,"segment"),this.segments.push(t),_.isNotNullNorUndefined(this.segments)&&this.segments.length&&(this.lastSegment=this.segments[this.segments.length-1])},i.SEPARATOR="&",i.METADATA="metadata",i.ENTITY_SET="entitySet",i.ENTITY_KEY="entityKey",i.SINGLETON="singleton",i.TYPE_NAME="typeName",i.PROPERTY="property",i.NAVIGATION_PROPERTY="navigationProperty",i.REF="ref",i.VALUE="value",i.COUNT="count",i.FUNCTION_CALL="functionCall",i.ACTION_CALL="actionCall",i.$METADATA="$metadata",i.$REF="$ref",i.$VALUE="$value",i.$COUNT="$count",i}(E),B=function m(t){this.annotationList=t},S=function(i){function t(t,e,n){var r=i.call(this,e)||this;return r.target=t,r.qualifier=n,r}return s(t,i),t}(B),P=function w(t,e){this.term=t,this.qualifier=e},C=function v(t,e,n,r,i,o,T,s,u,a){this.name=t,this.type=e,this.baseTerm=n,this.defaultValue=r,this.appliesTo=i,this.nullable=o,this.maxLength=T,this.precision=s,this.scale=u,this.srid=a},G=function L(t,e,n,r,i,o){this.name=t,this.extend=e,this.entitySets=n,this.singletons=r,this.functionImports=i,this.actionImports=o},b=function Y(t,e,n,r){this.name=t,this.entityType=e,this.navigationPropertyBinding=n,this.includeInServiceDocument=r},q=function D(t,e,n,r){this.name=t,this.members=e,this.underlyingType=n,this.isFlags=r},M=function F(t,e){this.name=t,this.value=e},x=function V(t,e,n,r,i,o){this.name=t,this.returnType=e,this.isBound=n,this.entitySetPath=r,this.isComposable=i,this.parameters=o},H=function k(t,e,n,r,i){this.name=t,this.returnType=e,this.isBound=n,this.entitySetPath=r,this.parameters=i},X=function j(t,e,n,r){this.name=t,this.functionName=e,this.entitySet=n,this.IncludeInServiceDocument=r},W=function $(t,e,n){this.name=t,this.action=e,this.entitySet=n},Q=function K(t,e,n,r,i,o,T){this.name=t,this.type=e,this.nullable=n,this.maxLength=r,this.precision=i,this.scale=o,this.srid=T},J=function z(t,e,n,r,i,o){this.type=t,this.nullable=e,this.maxLength=n,this.precision=r,this.scale=i,this.srid=o},Z=function tt(t,e){this.path=t,this.target=e},et=function(o){function t(t,e,n,r){var i=o.call(this,r)||this;return i.uri=t,i.includes=e,i.includeAnnotations=n,i}return s(t,o),t}(B),nt=function rt(t,e){this.namespace=t,this.alias=e},it=function ot(t,e,n){this.termNamespace=t,this.qualifier=e,this.targetNamespace=n},Tt=function(N){function t(t,e,n,r,i,o,T,s,u,a,E,l){var p=N.call(this,l)||this;return p.namespace=t,p.alias=e,p.enumTypes=n,p.complexTypes=r,p.entityTypes=i,p.functions=o,p.actions=T,p.entityContainer=s,p.typeDefinitions=u,p.terms=a,p.annotationsList=E,p}return s(t,N),t}(B),st=function ut(t,e,n){this.name=t,this.type=e,this.navigationPropertyBindings=n},at=function Et(t,e,n){this.name=t,this.type=e,this.nullable=n},lt=function(E){function t(t,e,n,r,i,o,T,s,u){var a=E.call(this,t,e,n)||this;return a.maxLength=r,a.precision=i,a.scale=o,a.unicode=T,a.srid=s,a.defaultValue=u,a}return s(t,E),t}(at),pt=function(u){function t(t,e,n,r,i,o,T){var s=u.call(this,t,e,n)||this;return s.partner=r,s.containsTarget=i,s.referentialConstraints=o,s.onDelete=T,s}return s(t,u),t}(at),Nt=function ht(t,e){this.property=t,this.referencedProperty=e},At=function ct(t){this.action=t},dt=function ft(t,e,n,r,i,o){this.name=t,this.properties=e,this.navigationProperties=n,this.baseType=r,this.openType=i,this["abstract"]=o},It=function(T){function t(t,e,n,r,i,o){return T.call(this,t,e,n,r,i,o)||this}return s(t,T),t}(dt),_t=function(a){function t(t,e,n,r,i,o,T,s){var u=a.call(this,t,n,r,i,o,T)||this;return u.key=e,u.hasStream=s,u}return s(t,a),t}(dt),Rt=function yt(t){this.propertyRefs=t},Ut=function Ot(t,e){this.name=t,this.alias=e},gt=function(a){function t(t,e,n,r,i,o,T,s){var u=a.call(this,s)||this;return u.name=t,u.underlayingType=e,u.maxLength=n,u.precision=r,u.scale=i,u.unicode=o,u.srid=T,u}return s(t,a),t}(B),Bt=function(){function t(t,e,n){var r=this;_.requireNotNullNorUndefined(t,"entities"),this.entities=[],t.forEach(function(t){_.isNullOrUndefined(n)?r.entities.push(Object.assign({},t)):r.entities.push(Object.assign(new n,t))}),this.count=e}return t.prototype.getEntities=function(){return this.entities},t.prototype.getCount=function(){return this.count},t}(),mt={ATTRIBUTE:0,TAG:1};mt[mt.ATTRIBUTE]="ATTRIBUTE",mt[mt.TAG]="TAG";var St=function Pt(t,e){this.name=t,this.fieldType=e},wt=function(){function a(t){try{var e=(new DOMParser).parseFromString(t,"text/xml");this.checkVersion(e),this.version=this.getFieldValueByAttribute(new St(a.ATTRIBUTE_VERSION,mt.ATTRIBUTE),e.documentElement.attributes),this.references=this.getObjects(e.documentElement,a.TAG_REFERENCE,[new St(a.ATTRIBUTE_URI,mt.ATTRIBUTE),new St(a.TAG_INCLUDE,mt.TAG),new St(a.TAG_INCLUDE_ANNOTATIONS,mt.TAG),new St(a.TAG_ANNOTATION,mt.TAG)]);var n=e.documentElement.getElementsByTagName(a.TAG_DATA_SERVICES)[0];this.schemas=this.getObjects(n,a.TAG_SCHEMA,[new St(a.ATTRIBUTE_NAMESPACE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ALIAS,mt.ATTRIBUTE),new St(a.TAG_ENUM_TYPE,mt.TAG),new St(a.TAG_COMPLEX_TYPE,mt.TAG),new St(a.TAG_ENTITY_TYPE,mt.TAG),new St(a.TAG_FUNCTION,mt.TAG),new St(a.TAG_ACTION,mt.TAG),new St(a.TAG_ENTITY_CONTAINER,mt.TAG),new St(a.TAG_TYPE_DEFINITION,mt.TAG),new St(a.TAG_TERM,mt.TAG),new St(a.TAG_ANNOTATIONS,mt.TAG),new St(a.TAG_ANNOTATION,mt.TAG)])}catch(r){throw new Error("Unable to parse metadata, "+r)}}return a.prototype.checkVersion=function(t){var e=t.documentElement.attributes;if(_.isNullOrUndefined(e))throw new Error("OData version is not specified in the metadata");var n=e.getNamedItem("Version");if(_.isNullOrUndefined(n))throw new Error("OData version is not specified in the metadata");var r=n.nodeValue;if("4.0"!==r)throw new Error('OData version "'+r+'" is not supported')},a.prototype.getObjects=function(t,e,n){for(var r,i=t.children,o=0;o<i.length;o++){var T=i.item(o);if(T.nodeName===e){var s=T.attributes,u=this.getFieldValues(n,s,T);switch(_.isNullOrUndefined(r)&&(r=[]),e){case a.TAG_REFERENCE:r.push(new et(u[0],u[1],u[2],u[3]));break;case a.TAG_INCLUDE:r.push(new nt(u[0],u[1]));break;case a.TAG_INCLUDE_ANNOTATIONS:r.push(new it(u[0],u[1],u[2]));break;case a.TAG_TERM:r.push(new C(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9]));break;case a.TAG_ANNOTATIONS:r.push(new S(u[0],u[1],u[2]));break;case a.TAG_ANNOTATION:r.push(new P(u[0],u[1]));break;case a.TAG_SCHEMA:r.push(new Tt(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11]));break;case a.TAG_ENUM_TYPE:r.push(new q(u[0],u[1],u[2],u[3]));break;case a.TAG_COMPLEX_TYPE:r.push(new It(u[0],u[1],u[2],u[3],u[4],u[5]));break;case a.TAG_ENTITY_TYPE:r.push(new _t(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7]));break;case a.TAG_FUNCTION:r.push(new x(u[0],u[1],u[2],u[3],u[4],u[5]));break;case a.TAG_MEMBER:r.push(new M(u[0],u[1]));break;case a.TAG_PROPERTY:r.push(new lt(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8]));break;case a.TAG_PROPERTY_REF:r.push(new Ut(u[0],u[1]));break;case a.TAG_NAVIGATION_PROPERTY:r.push(new pt(u[0],u[1],u[2],u[3],u[4],u[5],u[6]));break;case a.TAG_REFERENTIAL_CONSTRAINT:r.push(new Nt(u[0],u[1]));break;case a.TAG_PARAMETER:r.push(new Q(u[0],u[1],u[2],u[3],u[4],u[5],u[6]));break;case a.TAG_ACTION:r.push(new H(u[0],u[1],u[2],u[3],u[4]));break;case a.TAG_ENTITY_SET:r.push(new b(u[0],u[1],u[2],u[3]));break;case a.TAG_SINGLETON:r.push(new st(u[0],u[1],u[2]));break;case a.TAG_FUNCTION_IMPORT:r.push(new X(u[0],u[1],u[2],u[3]));break;case a.TAG_ACTION_IMPORT:r.push(new W(u[0],u[1],u[2]));break;case a.TAG_NAVIGATION_PROPERTY_BINDING:r.push(new Z(u[0],u[1]));break;case a.TAG_TYPE_DEFINITION:r.push(new gt(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7]));break;default:throw new Error("Unknwon tag:"+e)}}}return r},a.prototype.getObject=function(t,e,n){for(var r,i,o=t.children,T=0;T<o.length;T++)if(o.item(T).nodeName===e){if(_.isNotNullNorUndefined(i))throw new Error("Expected one "+e);i=o.item(T)}if(_.isNotNullNorUndefined(i)){var s=i.attributes,u=this.getFieldValues(n,s,i);switch(e){case a.TAG_KEY:r=new Rt(u[0]);break;case a.TAG_RETURN_TYPE:r=new J(u[0],u[1],u[2],u[3],u[4],u[5]);break;case a.TAG_ENTITY_CONTAINER:r=new G(u[0],u[1],u[2],u[3],u[4],u[5]);break;case a.TAG_ON_DELETE:r=new At(u[0]);break;default:throw new Error("Unknwon tag:"+e)}}return r},a.prototype.getFieldValues=function(t,e,n){var r,i,o=[];try{for(var T=I(t),s=T.next();!s.done;s=T.next()){var u=s.value;if(u.fieldType===mt.TAG)o.push(this.getFieldValueByTag(u,n));else{if(u.fieldType!==mt.ATTRIBUTE)throw new Error("Unknown field type: "+u.fieldType);o.push(this.getFieldValueByAttribute(u,e))}}}catch(a){r={error:a}}finally{try{s&&!s.done&&(i=T["return"])&&i.call(T)}finally{if(r)throw r.error}}return o},a.prototype.getFieldValueByAttribute=function(t,e){switch(t.name){case a.ATTRIBUTE_VERSION:case a.ATTRIBUTE_URI:case a.ATTRIBUTE_NAMESPACE:case a.ATTRIBUTE_ALIAS:case a.ATTRIBUTE_TERM_NAMESPACE:case a.ATTRIBUTE_TERM:case a.ATTRIBUTE_QUALIFIER:case a.ATTRIBUTE_TARGET_NAMESPACE:case a.ATTRIBUTE_NAME:case a.ATTRIBUTE_TYPE:case a.ATTRIBUTE_SRID:case a.ATTRIBUTE_DEFAULT_VALUE:case a.ATTRIBUTE_PARTNER:case a.ATTRIBUTE_PROPERTY:case a.ATTRIBUTE_REFERENCED_PROPERTY:case a.ATTRIBUTE_BASE_TYPE:case a.ATTRIBUTE_ENTITY_SET_PATH:case a.ATTRIBUTE_ENTITY_TYPE:case a.ATTRIBUTE_PATH:case a.ATTRIBUTE_TARGET:case a.ATTRIBUTE_FUNCTION:case a.ATTRIBUTE_ACTION:case a.ATTRIBUTE_ENTITY_SET:case a.ATTRIBUTE_UNDERLYING_TYPE:case a.ATTRIBUTE_EXTENDS:case a.ATTRIBUTE_BASE_TERM:case a.ATTRIBUTE_APPLIES_TO:return this.getAttributeValue(e,t.name);case a.ATTRIBUTE_NULLABLE:case a.ATTRIBUTE_UNICODE:case a.ATTRIBUTE_OPEN_TYPE:case a.ATTRIBUTE_HAS_STREAM:case a.ATTRIBUTE_IS_BOUND:case a.ATTRIBUTE_IS_COMPOSABLE:case a.ATTRIBUTE_CONTAINS_TARGET:case a.ATTRIBUTE_INCLUDE_IN_SERVICE_DOCUMENT:case a.ATTRIBUTE_ABSTRACT:case a.ATTRIBUTE_IS_FLAGS:return this.propertyValueToBoolean(this.getAttributeValue(e,t.name));case a.ATTRIBUTE_VALUE:case a.ATTRIBUTE_MAX_LENGTH:case a.ATTRIBUTE_PRECISION:case a.ATTRIBUTE_SCALE:return this.propertyValueToNumber(this.getAttributeValue(e,t.name));default:throw new Error("Unknwon attribute:"+t.name)}},a.prototype.getFieldValueByTag=function(t,e){switch(t.name){case a.TAG_INCLUDE:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAMESPACE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ALIAS,mt.ATTRIBUTE)]);case a.TAG_INCLUDE_ANNOTATIONS:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_TERM_NAMESPACE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_QUALIFIER,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TARGET_NAMESPACE,mt.ATTRIBUTE)]);case a.TAG_TERM:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_BASE_TERM,mt.ATTRIBUTE),new St(a.ATTRIBUTE_DEFAULT_VALUE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_APPLIES_TO,mt.ATTRIBUTE),new St(a.ATTRIBUTE_NULLABLE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_MAX_LENGTH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_PRECISION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SCALE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SRID,mt.ATTRIBUTE)]);case a.TAG_ANNOTATIONS:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_TARGET,mt.ATTRIBUTE),new St(a.TAG_ANNOTATION,mt.TAG),new St(a.ATTRIBUTE_QUALIFIER,mt.ATTRIBUTE)]);case a.TAG_ANNOTATION:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_TERM,mt.ATTRIBUTE),new St(a.ATTRIBUTE_QUALIFIER,mt.ATTRIBUTE)]);case a.TAG_ENUM_TYPE:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.TAG_MEMBER,mt.TAG),new St(a.ATTRIBUTE_UNDERLYING_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_IS_FLAGS,mt.ATTRIBUTE)]);case a.TAG_COMPLEX_TYPE:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.TAG_PROPERTY,mt.TAG),new St(a.TAG_NAVIGATION_PROPERTY,mt.TAG),new St(a.ATTRIBUTE_BASE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_OPEN_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ABSTRACT,mt.ATTRIBUTE)]);case a.TAG_ENTITY_TYPE:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.TAG_KEY,mt.TAG),new St(a.TAG_PROPERTY,mt.TAG),new St(a.TAG_NAVIGATION_PROPERTY,mt.TAG),new St(a.ATTRIBUTE_BASE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_OPEN_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_HAS_STREAM,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ABSTRACT,mt.ATTRIBUTE)]);case a.TAG_FUNCTION:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.TAG_RETURN_TYPE,mt.TAG),new St(a.ATTRIBUTE_IS_BOUND,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ENTITY_SET_PATH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_IS_COMPOSABLE,mt.ATTRIBUTE),new St(a.TAG_PARAMETER,mt.TAG)]);case a.TAG_MEMBER:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_VALUE,mt.ATTRIBUTE)]);case a.TAG_PROPERTY:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_NULLABLE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_MAX_LENGTH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_PRECISION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SCALE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_UNICODE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SRID,mt.ATTRIBUTE),new St(a.ATTRIBUTE_DEFAULT_VALUE,mt.ATTRIBUTE)]);case a.TAG_KEY:return this.getObject(e,t.name,[new St(a.TAG_PROPERTY_REF,mt.TAG)]);case a.TAG_PROPERTY_REF:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ALIAS,mt.ATTRIBUTE)]);case a.TAG_NAVIGATION_PROPERTY:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_NULLABLE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_PARTNER,mt.ATTRIBUTE),new St(a.ATTRIBUTE_CONTAINS_TARGET,mt.ATTRIBUTE),new St(a.TAG_REFERENTIAL_CONSTRAINT,mt.TAG),new St(a.TAG_ON_DELETE,mt.TAG)]);case a.TAG_REFERENTIAL_CONSTRAINT:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_PROPERTY,mt.ATTRIBUTE),new St(a.ATTRIBUTE_REFERENCED_PROPERTY,mt.ATTRIBUTE)]);case a.TAG_ON_DELETE:return this.getObject(e,t.name,[new St(a.ATTRIBUTE_ACTION,mt.ATTRIBUTE)]);case a.TAG_PARAMETER:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_NULLABLE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_MAX_LENGTH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_PRECISION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SCALE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SRID,mt.ATTRIBUTE)]);case a.TAG_RETURN_TYPE:return this.getObject(e,t.name,[new St(a.ATTRIBUTE_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_NULLABLE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_MAX_LENGTH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_PRECISION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SCALE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SRID,mt.ATTRIBUTE)]);case a.TAG_ACTION:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.TAG_RETURN_TYPE,mt.TAG),new St(a.ATTRIBUTE_IS_BOUND,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ENTITY_SET_PATH,mt.ATTRIBUTE),new St(a.TAG_PARAMETER,mt.TAG)]);case a.TAG_ENTITY_CONTAINER:return this.getObject(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_EXTENDS,mt.ATTRIBUTE),new St(a.TAG_ENTITY_SET,mt.TAG),new St(a.TAG_SINGLETON,mt.TAG),new St(a.TAG_FUNCTION_IMPORT,mt.TAG),new St(a.TAG_ACTION_IMPORT,mt.TAG)]);case a.TAG_ENTITY_SET:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ENTITY_TYPE,mt.ATTRIBUTE),new St(a.TAG_NAVIGATION_PROPERTY_BINDING,mt.TAG),new St(a.ATTRIBUTE_INCLUDE_IN_SERVICE_DOCUMENT,mt.ATTRIBUTE)]);case a.TAG_SINGLETON:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TYPE,mt.ATTRIBUTE),new St(a.TAG_NAVIGATION_PROPERTY_BINDING,mt.TAG)]);case a.TAG_FUNCTION_IMPORT:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_FUNCTION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ENTITY_SET,mt.ATTRIBUTE),new St(a.ATTRIBUTE_INCLUDE_IN_SERVICE_DOCUMENT,mt.ATTRIBUTE)]);case a.TAG_ACTION_IMPORT:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ACTION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_ENTITY_SET,mt.ATTRIBUTE)]);case a.TAG_NAVIGATION_PROPERTY_BINDING:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_PATH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_TARGET,mt.ATTRIBUTE)]);case a.TAG_TYPE_DEFINITION:return this.getObjects(e,t.name,[new St(a.ATTRIBUTE_NAME,mt.ATTRIBUTE),new St(a.ATTRIBUTE_UNDERLYING_TYPE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_MAX_LENGTH,mt.ATTRIBUTE),new St(a.ATTRIBUTE_PRECISION,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SCALE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_UNICODE,mt.ATTRIBUTE),new St(a.ATTRIBUTE_SRID,mt.ATTRIBUTE),new St(a.TAG_ANNOTATION,mt.TAG)]);default:throw new Error("Unknwon tag:"+t.name)}},a.prototype.getAttributeValue=function(t,e){var n=t.getNamedItem(e);return _.isNotNullNorUndefined(n)?n.nodeValue:undefined},a.prototype.propertyValueToNumber=function(t){return _.isNotNullNorUndefined(t)?Number(t):undefined},a.prototype.propertyValueToBoolean=function(t){return _.isNotNullNorUndefined(t)?"true"===t:undefined},a.TAG_EDMX="edmx:Edmx",a.TAG_DATA_SERVICES="edmx:DataServices",a.TAG_REFERENCE="edmx:Reference",a.TAG_INCLUDE="edmx:Include",a.TAG_INCLUDE_ANNOTATIONS="edmx:IncludeAnnotations",a.TAG_TERM="Term",a.TAG_ANNOTATIONS="Annotations",a.TAG_ANNOTATION="Annotation",a.TAG_SCHEMA="Schema",a.TAG_ENUM_TYPE="EnumType",a.TAG_MEMBER="Member",a.TAG_COMPLEX_TYPE="ComplexType",a.TAG_ENTITY_TYPE="EntityType",a.TAG_PROPERTY="Property",a.TAG_KEY="Key",a.TAG_PROPERTY_REF="PropertyRef",a.TAG_NAVIGATION_PROPERTY="NavigationProperty",a.TAG_REFERENTIAL_CONSTRAINT="ReferentialConstraint",a.TAG_ON_DELETE="OnDelete",a.TAG_FUNCTION="Function",a.TAG_RETURN_TYPE="ReturnType",a.TAG_PARAMETER="Parameter",a.TAG_ACTION="Action",a.TAG_ENTITY_CONTAINER="EntityContainer",a.TAG_ENTITY_SET="EntitySet",a.TAG_SINGLETON="Singleton",a.TAG_FUNCTION_IMPORT="FunctionImport",a.TAG_ACTION_IMPORT="ActionImport",a.TAG_NAVIGATION_PROPERTY_BINDING="NavigationPropertyBinding",a.TAG_TYPE_DEFINITION="TypeDefinition",a.ATTRIBUTE_VERSION="Version",a.ATTRIBUTE_URI="Uri",a.ATTRIBUTE_ALIAS="Alias",a.ATTRIBUTE_NAMESPACE="Namespace",a.ATTRIBUTE_TERM_NAMESPACE="TermNamespace",a.ATTRIBUTE_QUALIFIER="Qualifier",a.ATTRIBUTE_TARGET_NAMESPACE="TargetNamespace",a.ATTRIBUTE_TERM="Term",a.ATTRIBUTE_NAME="Name",a.ATTRIBUTE_VALUE="Value",a.ATTRIBUTE_BASE_TYPE="BaseType",a.ATTRIBUTE_OPEN_TYPE="OpenType",a.ATTRIBUTE_TYPE="Type",a.ATTRIBUTE_NULLABLE="Nullable",a.ATTRIBUTE_MAX_LENGTH="MaxLength",a.ATTRIBUTE_PRECISION="Precision",a.ATTRIBUTE_SCALE="Scale",a.ATTRIBUTE_UNICODE="Unicode",a.ATTRIBUTE_SRID="SRID",a.ATTRIBUTE_DEFAULT_VALUE="DefaultValue",a.ATTRIBUTE_PARTNER="Partner",a.ATTRIBUTE_PROPERTY="Property",a.ATTRIBUTE_REFERENCED_PROPERTY="ReferencedProperty",a.ATTRIBUTE_HAS_STREAM="HasStream",a.ATTRIBUTE_CONTAINS_TARGET="ContainsTarget",a.ATTRIBUTE_IS_BOUND="IsBound",a.ATTRIBUTE_ENTITY_SET_PATH="EntitySetPath",a.ATTRIBUTE_IS_COMPOSABLE="IsComposable",a.ATTRIBUTE_ENTITY_TYPE="EntityType",a.ATTRIBUTE_PATH="Path",a.ATTRIBUTE_TARGET="Target",a.ATTRIBUTE_FUNCTION="Function",a.ATTRIBUTE_ACTION="Action",a.ATTRIBUTE_ENTITY_SET="EntitySet",a.ATTRIBUTE_INCLUDE_IN_SERVICE_DOCUMENT="IncludeInServiceDocument",a.ATTRIBUTE_ABSTRACT="Abstract",a.ATTRIBUTE_UNDERLYING_TYPE="UnderlyingType",a.ATTRIBUTE_IS_FLAGS="IsFlags",a.ATTRIBUTE_EXTENDS="Extends",a.ATTRIBUTE_BASE_TERM="BaseTerm",a.ATTRIBUTE_APPLIES_TO="AppliesTo",a}(),Ct=function(){function t(t){this.httpResponse=t}return t.prototype.getHttpResponse=function(){return this.httpResponse},t.prototype.isOk=function(){return this.httpResponse.ok},t.prototype.getBodyAsJson=function(){return null},t.prototype.getBodyAsText=function(){return this.httpResponse.body},t.prototype.toString=function(){var t=this.httpResponse.status+" "+this.httpResponse.statusText+"\n",e=this.httpResponse.headers;try{for(var n=I(e.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;t+=i+": ";var o="";try{for(var T=I(e.getAll(i)),s=T.next();!s.done;s=T.next()){var u=s.value;o.length&&(o+=" "),o+=u}}catch(h){l={error:h}}finally{try{s&&!s.done&&(p=T["return"])&&p.call(T)}finally{if(l)throw l.error}}t+=o+"\n"}}catch(A){a={error:A}}finally{try{r&&!r.done&&(E=n["return"])&&E.call(n)}finally{if(a)throw a.error}}var a,E,l,p,N=this.getBodyAsJson();return _.isNotNullNorUndefined(N)?t+=JSON.stringify(N,null,4):t+=this.getBodyAsText(),t},t}(),vt=function(e){function a(t){return e.call(this,t)||this}return s(a,e),a.prototype.getBodyAsJson=function(){var t=this.getHttpResponse().headers.get("Content-Type");if(_.isNotNullNorUndefined(t)&&t.includes("json"))try{return JSON.parse(this.getBodyAsText())}catch(e){return null}return null},a.prototype.toMetadata=function(){var t=this.getBodyAsText();return new wt(t)},a.prototype.toEntitySet=function(t){var e=this.getBodyAsJson();if(_.isNotNullNorUndefined(e)&&e.hasOwnProperty(a.VALUE)){var n=null;return e.hasOwnProperty(a.ODATA_COUNT)&&(n=e[a.ODATA_COUNT]),new Bt(e[a.VALUE],n,t)}return null},a.prototype.toComplexCollection=function(t){var e,n,r=this.getBodyAsJson();if(_.isNotNullNorUndefined(r)&&r.hasOwnProperty(a.VALUE)){var i=[];try{for(var o=I(r[a.VALUE]),T=o.next();!T.done;T=o.next()){var s=T.value;i.push(this.toObject(s,t))}}catch(u){e={error:u}}finally{try{T&&!T.done&&(n=o["return"])&&n.call(o)}finally{if(e)throw e.error}}return i}return null},a.prototype.toEntity=function(t){var e=this.getBodyAsJson();return this.toObject(e,t)},a.prototype.toComplexValue=function(t){var e=this.getBodyAsJson();return this.toObject(e,t)},a.prototype.toPropertyValue=function(){var t=this.getBodyAsJson();return _.isNotNullNorUndefined(t)?t.hasOwnProperty(a.VALUE)?t[a.VALUE]:null:JSON.parse(this.getBodyAsText())},a.prototype.toCount=function(){return Number(this.getBodyAsText())},a.prototype.toODataResponseBatch=function(){return new Gt(this.getHttpResponse())},a.prototype.toObject=function(t,e){return _.isNotNullNorUndefined(t)?_.isNullOrUndefined(e)?Object.assign({},t):Object.assign(new e,t):null},a.VALUE="value",a.ODATA_COUNT="@odata.count",a}(Ct),Gt=function(n){function f(t){var e=n.call(this,t)||this;return e.odataResponses=[],e.parseResponses(),e}return s(f,n),f.prototype.getODataResponses=function(){return this.odataResponses},f.prototype.parseResponses=function(){for(var t,e,n,r,i,o,T,s=this.getHttpResponse().headers.get(f.CONTENT_TYPE),u=this.getBoundaryDelimiter(s),a=this.getBoundaryEnd(u),E=this.getBodyAsText().split(f.NEWLINE),l=0;l<E.length;l++){var p=E[l];if(p.startsWith(f.CONTENT_TYPE))this.getHeaderValue(p)===f.MULTIPART_MIXED&&(t=[],e=undefined,n=this.getBoundaryDelimiter(p),r=this.getBoundaryEnd(n),i=undefined);else if(_.isNotNullNorUndefined(t)&&p.startsWith(f.CONTENT_ID))e=Number(this.getHeaderValue(p));else if(p.startsWith(f.HTTP11))i=l;else if(p===u||p===n||p===a||p===r){if(!i)continue;var N=this.createODataResponse(E,i,l-1);if(_.isNotNullNorUndefined(t)?t[e]=N:this.odataResponses.push(N),p===u||p===n)i=l+1;else if(p===a||p===r){if(_.isNotNullNorUndefined(t))try{for(var h=I(t),A=h.next();!A.done;A=h.next()){var c=A.value;_.isNotNullNorUndefined(c)&&this.odataResponses.push(c)}}catch(d){o={error:d}}finally{try{A&&!A.done&&(T=h["return"])&&T.call(h)}finally{if(o)throw o.error}}t=undefined,n=undefined,r=undefined,i=undefined}}}},f.prototype.getHeaderValue=function(t){var e=t.split(";")[0].trim();return e=e.split(":")[1].trim()},f.prototype.getBoundaryDelimiter=function(t){if(2===t.split(";").length){var e=t.split(";")[1].trim();return f.BOUNDARY_PREFIX_SUFFIX+e.split("=")[1]}return""},f.prototype.getBoundaryEnd=function(t){return t.length?t+f.BOUNDARY_PREFIX_SUFFIX:""},f.prototype.createODataResponse=function(t,e,n){var r=e,i=t[r],o=t[r].split(" ")[1],T=i.indexOf(o)+o.length+1,s=i.substring(T),u=new p.HttpHeaders;for(++r;r<=n;r++){var a=t[r];if(""===a)break;var E=a.split(": ");u=u.append(E[0].trim(),E[1].trim())}for(var l="";r<=n;r++)l+=t[r];return new vt(new p.HttpResponse({body:l,headers:u,status:Number(o),statusText:s}))},f.CONTENT_TYPE="Content-Type",f.CONTENT_ID="Content-ID",f.HTTP11="HTTP/1.1",f.BOUNDARY_PREFIX_SUFFIX="--",f.NEWLINE="\r\n",f.MULTIPART_MIXED="multipart/mixed",f}(Ct),Lt=function bt(t,e,n,r,i,o){void 0===e&&(e="response"),void 0===i&&(i="text"),this.headers=t,this.observe=e,this.params=n,this.reportProgress=r,this.responseType=i,this.withCredentials=o},Yt=function(){function n(t){this.http=t}return n.prototype.get=function(t,e){var n=t.toString(),r=this.createHttpOptions(e);return this.http.get(n,r).pipe(T.map(function(t){return new vt(t)}))},n.prototype.post=function(t,e,n){var r=t.toString(),i=this.createHttpOptions(n);return this.http.post(r,e,i).pipe(T.map(function(t){return new vt(t)}))},n.prototype.patch=function(t,e,n,r){var i=t.toString(),o=this.createHttpOptions(r);return o=this.mergeETag(o,n),this.http.patch(i,e,o).pipe(T.map(function(t){return new vt(t)}))},n.prototype.put=function(t,e,n,r){var i=t.toString(),o=this.createHttpOptions(r);return o=this.mergeETag(o,n),this.http.put(i,e,o).pipe(T.map(function(t){return new vt(t)}))},n.prototype["delete"]=function(t,e,n){var r=t.toString(),i=this.createHttpOptions(n);return i=this.mergeETag(i,e),this.http["delete"](r,i).pipe(T.map(function(t){return new vt(t)}))},n.prototype.createHttpOptions=function(t){return t instanceof Lt?t:Object.assign(new Lt,t)},n.prototype.mergeETag=function(t,e){return _.isNullOrUndefined(e)||(_.isNullOrUndefined(t)&&(t=new Lt),_.isNullOrUndefined(t.headers)&&(t.headers=new p.HttpHeaders),t.headers[n.IF_MATCH_HEADER]=e),t},n.IF_MATCH_HEADER="If-Match",n.decorators=[{type:r.Injectable}],n.ctorParameters=function(){return[{type:p.HttpClient}]},n}(),qt=function Dt(){},Mt=function(){function t(t){this.setProperty(t)}return t.prototype.setProperty=function(t){_.requireNotNullNorUndefined(t,"property"),this.property=t},t.prototype.getProperty=function(){return this.property},t}(),Ft=function(i){function t(t,e,n){var r=i.call(this,t)||this;return _.requireNotNullNorUndefined(t,"property"),_.requireNotNullNorUndefined(e,"operator"),_.requireNotUndefined(n,"value"),r.operator=e,r.value=n,r}return s(t,i),t.prototype.toString=function(){return this.property+" "+o[this.operator].toLowerCase()+" "+_.getValueURI(this.value,!1)},t.prototype.isEmpty=function(){return(_.isNullOrUndefined(this.property)||!this.property.length)&&_.isNullOrUndefined(this.operator)&&_.isNullOrUndefined(this.value)||this.value instanceof qt&&!this.value.isEmpty()||this.value instanceof Array&&!this.value.length},t}(Mt),xt=function(i){function t(t,e,n){var r=i.call(this,e)||this;return _.requireNotNullNorUndefined(t,"functionName"),_.requireNotEmpty(t,"functionName"),_.requireNotNullNorUndefined(e,"property"),_.requireNotEmpty(e,"property"),r.functionName=t,r.property=e,r.value=n,r}return s(t,i),t.prototype.toString=function(){return _.isNotNullNorUndefined(this.property)&&_.isNotNullNorUndefined(this.value)?this.functionName+"("+this.property+","+_.getValueURI(this.value,!1)+")":_.isNotNullNorUndefined(this.property)?this.functionName+"("+this.property+")":_.isNotNullNorUndefined(this.value)?this.functionName+"("+_.getValueURI(this.value,!1)+")":this.functionName+"()"},t.prototype.isEmpty=function(){return!(!_.isNullOrUndefined(this.property)||!_.isNullOrUndefined(this.value))||(!!(_.isNullOrUndefined(this.property)&&_.isNotNullNorUndefined(this.value)&&_.isEmpty(this.value))||!(!_.isNullOrUndefined(this.value)||!_.isNotNullNorUndefined(this.property)||this.property.length))},t}(Mt),Vt=function(r){function i(t,e,n){return r.call(this,t,e,"string"==typeof n?new a(n):n instanceof i?n.toString():n)||this}return s(i,r),i}(xt),Ht=function(r){function t(t,e){var n=r.call(this,"contains",t,e)||this;return _.requireNotNullNorUndefined(e,"value"),_.requireNotEmpty(e,"value"),n}return s(t,r),t}(Vt),kt=function(r){function t(t,e){var n=r.call(this,"endswith",t,e)||this;return _.requireNotNullNorUndefined(e,"value"),_.requireNotEmpty(e,"value"),n}return s(t,r),t}(Vt),Xt=function(r){function t(t,e){var n=r.call(this,"startswith",t,e)||this;return _.requireNotNullNorUndefined(e,"value"),_.requireNotEmpty(e,"value"),n}return s(t,r),t}(Vt),jt=function(e){function t(t){return e.call(this,"length",t)||this}return s(t,e),t}(Vt),Wt=function(r){function t(t,e){var n=r.call(this,"indexof",t,e)||this;return _.requireNotNullNorUndefined(e,"value"),_.requireNotEmpty(e,"value"),n}return s(t,r),t}(Vt),$t=function(r){function t(t,e){var n=r.call(this,"substring",t,e)||this;return _.requireNotNullNorUndefined(e,"value"),_.requireNotEmpty(e,"value"),n}return s(t,r),t}(Vt),Qt=function(e){function t(t){return e.call(this,"tolower",t)||this}return s(t,e),t}(Vt),Kt=function(e){function t(t){return e.call(this,"toupper",t)||this}return s(t,e),t}(Vt),Jt=function(e){function t(t){return e.call(this,"trim",t)||this}return s(t,e),t}(Vt),zt=function(r){function t(t,e){var n=r.call(this,"concat",t,e)||this;return _.requireNotNullNorUndefined(e,"value"),_.requireNotEmpty(e,"value"),n}return s(t,r),t}(Vt),Zt=function(){function t(t){this.filter=t}return t.prototype.getFilter=function(){return this.filter},t}(),te={ANY:0,ALL:1};te[te.ANY]="ANY",te[te.ALL]="ALL";var ee={PROPERTY_COLLECTION:0,ENTITY_SET:1};ee[ee.PROPERTY_COLLECTION]="PROPERTY_COLLECTION",ee[ee.ENTITY_SET]="ENTITY_SET";var ne=function(o){function t(t,e,n,r){var i=o.call(this,r)||this;return _.requireNotNullNorUndefined(t,"lambdaCollection"),_.requireNotNullNorUndefined(e,"propertyOrEntitySet"),_.requireNotNullNorUndefined(n,"lambdaOperator"),_.requireNotNullNorUndefined(r,"filter"),t===ee.PROPERTY_COLLECTION&&i.checkProperty(e,r),i.lambdaCollection=t,i.propertyOrEntitySet=e,i.lambdaOperator=n,i}return s(t,o),t.prototype.toString=function(){switch(this.lambdaCollection){case ee.PROPERTY_COLLECTION:return this.replaceProperty(this.filter),this.propertyOrEntitySet+"/"+te[this.lambdaOperator].toLowerCase()+"(x:"+this.filter.toString()+")";case ee.ENTITY_SET:return this.propertyOrEntitySet+"/"+te[this.lambdaOperator].toLowerCase()+"(x:x/"+this.filter.toString()+")";default:throw new Error("unknown lambdaCollection: "+this.lambdaCollection)}},t.prototype.isEmpty=function(){return!!(_.isNullOrUndefined(this.lambdaCollection)&&_.isNullOrUndefined(this.propertyOrEntitySet)&&_.isNullOrUndefined(this.lambdaOperator)&&_.isNullOrUndefined(this.filter))||(!!(_.isNullOrUndefined(this.propertyOrEntitySet)&&_.isNotNullNorUndefined(this.filter)&&_.isEmpty(this.filter))||(!(!_.isNullOrUndefined(this.filter)||!_.isNotNullNorUndefined(this.propertyOrEntitySet)||this.propertyOrEntitySet.length)||!(!_.isNotNullNorUndefined(this.propertyOrEntitySet)||this.propertyOrEntitySet.length||!_.isNotNullNorUndefined(this.filter)||!_.isEmpty(this.filter))))},t.prototype.checkProperty=function(t,e){if(!_.isNullOrUndefined(e)){if(e instanceof Mt&&t!==e.getProperty())throw new Error("lambda property to filter must match inner filters property");if(e instanceof Zt){var n=e.getFilter();if(n instanceof qt)this.replaceProperty(n);else try{for(var r=I(n),i=r.next();!i.done;i=r.next()){var o=i.value;this.replaceProperty(o)}}catch(u){T={error:u}}finally{try{i&&!i.done&&(s=r["return"])&&s.call(r)}finally{if(T)throw T.error}}}var T,s}},t.prototype.replaceProperty=function(t){var e,n;if(!_.isNullOrUndefined(t)&&(t instanceof Mt&&t.setProperty("x"),t instanceof Zt)){var r=t.getFilter();if(r instanceof qt)this.replaceProperty(r);else try{for(var i=I(r),o=i.next();!o.done;o=i.next()){var T=o.value;this.replaceProperty(T)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(e)throw e.error}}}},t}(Zt),re=function(r){function t(t,e){var n=r.call(this,t)||this;return _.requireNotNullNorUndefined(t,"filters"),_.requireNotEmpty(t,"filters"),_.requireNotNullNorUndefined(e,"operator"),n.operator=e,n}return s(t,r),t.prototype.toString=function(){return this.filter instanceof Array?_.toString(this.filter,this.operator):this.filter.toString()},t.prototype.isEmpty=function(){if(_.isNullOrUndefined(this.filter))return!0;try{for(var t=I(this.filter),e=t.next();!e.done;e=t.next()){if(e.value.isEmpty())return!0}}catch(i){n={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(n)throw n.error}}return!1;var n,r},t}(Zt),ie=function oe(){},Te=function(r){function t(t,e){var n=r.call(this)||this;if(n.values=t,n.operator=e,_.requireNotNullNorUndefined(t,"values"),_.requireNotNullNorUndefined(e,"operator"),_.requireNotEmpty(t,"values"),e===l.NOT&&1!==t.length)throw new Error("operator "+l[e]+" requires a single value");return n}return s(t,r),t.prototype.toString=function(){return _.toString(this.values,this.operator,!0)},t.prototype.isEmpty=function(){if(_.isNullOrUndefined(this.values))return!0;try{for(var t=I(this.values),e=t.next();!e.done;e=t.next()){if(e.value.isEmpty())return!0}}catch(i){n={error:i}}finally{try{e&&!e.done&&(r=t["return"])&&r.call(t)}finally{if(n)throw n.error}}return!1;var n,r},t}(ie),se=function(n){function t(t){var e=n.call(this)||this;return e.value=t,_.requireNotNullNorUndefined(t,"value"),_.requireNotEmpty(t,"value"),e}return s(t,n),t.prototype.toString=function(){return this.value},t.prototype.isEmpty=function(){return _.isNullOrUndefined(this.value)||!this.value.length},t}(ie),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.toString=function(){return'"'+this.value+'"'},e}(se),ae=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule,p.HttpClientModule],providers:[Yt]}]}],t}();t.ODataQueryAbstract=E,t.Method=h,t.BatchRequest=A,t.ODataQueryBatch=d,t.ODataQuery=g,t.QuotedString=a,t.CsdlAnnotable=B,t.CsdlAnnotations=S,t.CsdlAnnotation=P,t.CsdlTerm=C,t.CsdlEntityContainer=G,t.CsdlEntitySet=b,t.CsdlEnumType=q,t.CsdlEnumMember=M,t.CsdlFunction=x,t.CsdlAction=H,t.CsdlFunctionImport=X,t.CsdlActionImport=W,t.CsdlParameter=Q,t.CsdlReturnType=J,t.CsdlNavigationPropertyBinding=Z,t.CsdlReference=et,t.CsdlInclude=nt,t.CsdlIncludeAnnotations=it,t.CsdlSchema=Tt,t.CsdlSingleton=st,t.CsdlStructuralProperty=at,t.CsdlProperty=lt,t.CsdlNavigationProperty=pt,t.CsdlReferentialConstraint=Nt,t.CsdlOnDelete=At,t.CsdlStructuredType=dt,t.CsdlComplexType=It,t.CsdlEntityType=_t,t.CsdlKey=Rt,t.CsdlPropertyRef=Ut,t.CsdlTypeDefinition=gt,t.EntitySet=Bt,t.FieldType=mt,t.Field=St,t.Metadata=wt,t.ODataResponseAbstract=Ct,t.ODataResponseBatch=Gt,t.ODataResponse=vt,t.HttpOptions=Lt,t.ODataService=Yt,t.FilterComparison=Ft,t.FilterFunction=xt,t.FilterFunctionString=Vt,t.FilterContains=Ht,t.FilterEndswith=kt,t.FilterStartswith=Xt,t.FilterLength=jt,t.FilterIndexof=Wt,t.FilterSubstring=$t,t.FilterTolower=Qt,t.FilterToupper=Kt,t.FilterTrim=Jt,t.FilterConcat=zt,t.FilterHasFilter=Zt,t.FilterHasProperty=Mt,t.LambdaOperator=te,t.LambdaCollection=ee,t.FilterLambda=ne,t.FilterLogical=re,t.FilterString=f,t.Filter=qt,t.SearchLogical=Te,t.SearchPhrase=ue,t.SearchSimple=se,t.Search=ie,t.Expand=R,t.OperatorComparison=o,t.OperatorLogical=l,t.OperatorArithmetic=u,t.Order=y,t.Orderby=U,t.QueryOptions=O,t.Utils=_,t.ODataModule=ae,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=odata-v4-ng.umd.min.js.map