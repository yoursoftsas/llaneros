/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { OperatorLogical } from '../query-options/operator';
import { QuotedString } from '../odata-query/quoted-string';
var Utils = /** @class */ (function () {
    function Utils() {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    Utils.isNull = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value === null;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    Utils.isUndefined = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return value === undefined;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    Utils.isNullOrUndefined = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return Utils.isNull(value) || Utils.isUndefined(value);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    Utils.isNotNullNorUndefined = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        return !Utils.isNull(value) && !Utils.isUndefined(value);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    Utils.isEmpty = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (Utils.isNullOrUndefined(value)
            || typeof (value) === 'string' && !value.length
            || value instanceof Array && !value.length
            || typeof (value.isEmpty) === 'function' && value.isEmpty()) {
            return true;
        }
        if (value instanceof Array && value) {
            try {
                for (var value_1 = tslib_1.__values(value), value_1_1 = value_1.next(); !value_1_1.done; value_1_1 = value_1.next()) {
                    var v = value_1_1.value;
                    if (!Utils.isEmpty(v)) {
                        return false;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (value_1_1 && !value_1_1.done && (_a = value_1.return)) _a.call(value_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return true;
        }
        return false;
        var e_1, _a;
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNull = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (fieldValue !== null) {
            throw new Error(fieldName + ' must be null');
        }
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireUndefined = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (fieldValue !== undefined) {
            throw new Error(fieldName + ' must be undefined');
        }
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNotNull = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (fieldValue === null) {
            throw new Error(fieldName + ' cannot be null');
        }
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNotUndefined = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (fieldValue === undefined) {
            throw new Error(fieldName + ' cannot be undefined');
        }
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNotNullNorUndefined = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        Utils.requireNotNull(fieldValue, fieldName);
        Utils.requireNotUndefined(fieldValue, fieldName);
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNullOrUndefined = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (!Utils.isNull(fieldValue) && !Utils.isUndefined(fieldValue)) {
            throw new Error(fieldName + ' must be null or undefined');
        }
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNotEmpty = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (Utils.isEmpty(fieldValue)) {
            throw new Error(fieldName + ' cannot be empty');
        }
    };
    /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    Utils.requireNotNegative = /**
     * @param {?} fieldValue
     * @param {?} fieldName
     * @return {?}
     */
    function (fieldValue, fieldName) {
        if (fieldValue < 0) {
            throw new Error(fieldName + ' cannot be negative');
        }
    };
    /**
     * @param {?} path
     * @param {?} segment
     * @return {?}
     */
    Utils.appendSegment = /**
     * @param {?} path
     * @param {?} segment
     * @return {?}
     */
    function (path, segment) {
        Utils.requireNotNullNorUndefined(path, 'path');
        Utils.requireNotNullNorUndefined(segment, 'segment');
        if (!path.endsWith('/')) {
            path += '/';
        }
        return path + segment;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    Utils.removeEndingSeparator = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        Utils.requireNotNullNorUndefined(value, 'value');
        if (value.endsWith('/')) {
            if (value.length === 1) {
                return '';
            }
            return value.substring(0, value.length - 1);
        }
        return value;
    };
    /**
     * @param {?} value
     * @param {?} encodeURI
     * @return {?}
     */
    Utils.getValueURI = /**
     * @param {?} value
     * @param {?} encodeURI
     * @return {?}
     */
    function (value, encodeURI) {
        Utils.requireNotUndefined(value, 'value');
        Utils.requireNotNullNorUndefined(encodeURI, 'encodeURI');
        /** @type {?} */
        var res = value;
        if (typeof (res) === 'string') {
            // encode uri component
            if (Utils.isNotNullNorUndefined(encodeURI) && encodeURI) {
                res = encodeURIComponent(res);
            }
        }
        else if (res instanceof QuotedString) {
            // escape single quote
            res = res.toString().replace(/'/g, '\'\'');
            // encode uri component
            if (Utils.isNotNullNorUndefined(encodeURI) && encodeURI) {
                res = encodeURIComponent(res);
            }
            // add start/ending quotes
            res = '\'' + res + '\'';
        }
        // boolean, number
        return res;
    };
    /**
     * @param {?} items
     * @param {?=} operator
     * @param {?=} operatorUppercase
     * @return {?}
     */
    Utils.toString = /**
     * @param {?} items
     * @param {?=} operator
     * @param {?=} operatorUppercase
     * @return {?}
     */
    function (items, operator, operatorUppercase) {
        if (operatorUppercase === void 0) { operatorUppercase = false; }
        /** @type {?} */
        var res = '';
        if (Utils.isNullOrUndefined(items) || !items.length) {
            return res;
        }
        try {
            for (var items_1 = tslib_1.__values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {
                var item = items_1_1.value;
                if (res.length) {
                    if (Utils.isNotNullNorUndefined(operator)) {
                        /** @type {?} */
                        var operatorString = Utils.getOperatorString(operator, operatorUppercase);
                        res += " " + operatorString + " ";
                    }
                    else {
                        res += ',';
                    }
                }
                if (Utils.isNotNullNorUndefined(operator) && operator === OperatorLogical.NOT) {
                    /** @type {?} */
                    var operatorString = Utils.getOperatorString(operator, operatorUppercase);
                    res += operatorString + " ";
                }
                res += item;
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (Utils.isNotNullNorUndefined(operator)) {
            return "(" + res + ")";
        }
        return res;
        var e_2, _a;
    };
    /**
     * @param {?} operator
     * @param {?} operatorUppercase
     * @return {?}
     */
    Utils.getOperatorString = /**
     * @param {?} operator
     * @param {?} operatorUppercase
     * @return {?}
     */
    function (operator, operatorUppercase) {
        /** @type {?} */
        var operatorString = OperatorLogical[operator].toLowerCase();
        if (Utils.isNotNullNorUndefined(operatorUppercase) && operatorUppercase) {
            operatorString = operatorString.toUpperCase();
        }
        return operatorString;
    };
    return Utils;
}());
export { Utils };

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9vZGF0YS12NC1uZy8iLCJzb3VyY2VzIjpbImxpYi91dGlscy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUU1RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFNUQsSUFBQTs7Ozs7OztJQUNXLFlBQU07Ozs7SUFBYixVQUFjLEtBQVU7UUFDcEIsTUFBTSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUM7S0FDekI7Ozs7O0lBRU0saUJBQVc7Ozs7SUFBbEIsVUFBbUIsS0FBVTtRQUN6QixNQUFNLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQztLQUM5Qjs7Ozs7SUFFTSx1QkFBaUI7Ozs7SUFBeEIsVUFBeUIsS0FBVTtRQUMvQixNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQzFEOzs7OztJQUVNLDJCQUFxQjs7OztJQUE1QixVQUE2QixLQUFVO1FBQ25DLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQzVEOzs7OztJQUVNLGFBQU87Ozs7SUFBZCxVQUFlLEtBQVU7UUFDckIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQztlQUMzQixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07ZUFDNUMsS0FBSyxZQUFZLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNO2VBQ3ZDLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssVUFBVSxJQUFJLEtBQUssQ0FBQyxPQUFPLEVB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L3F1ZXJ5LW9wdGlvbnMvb3BlcmF0b3InO1xuXG5pbXBvcnQgeyBRdW90ZWRTdHJpbmcgfSBmcm9tICcuLi9vZGF0YS1xdWVyeS9xdW90ZWQtc3RyaW5nJztcblxuZXhwb3J0IGNsYXNzIFV0aWxzIHtcbiAgICBzdGF0aWMgaXNOdWxsKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc1VuZGVmaW5lZCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHN0YXRpYyBpc051bGxPclVuZGVmaW5lZCh2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBVdGlscy5pc051bGwodmFsdWUpIHx8IFV0aWxzLmlzVW5kZWZpbmVkKHZhbHVlKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaXNOb3ROdWxsTm9yVW5kZWZpbmVkKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICFVdGlscy5pc051bGwodmFsdWUpICYmICFVdGlscy5pc1VuZGVmaW5lZCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzRW1wdHkodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoVXRpbHMuaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpXG4gICAgICAgICAgICB8fCB0eXBlb2YgKHZhbHVlKSA9PT0gJ3N0cmluZycgJiYgIXZhbHVlLmxlbmd0aFxuICAgICAgICAgICAgfHwgdmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiAhdmFsdWUubGVuZ3RoXG4gICAgICAgICAgICB8fCB0eXBlb2YgKHZhbHVlLmlzRW1wdHkpID09PSAnZnVuY3Rpb24nICYmIHZhbHVlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghVXRpbHMuaXNFbXB0eSh2KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHN0YXRpYyByZXF1aXJlTnVsbChmaWVsZFZhbHVlOiBhbnksIGZpZWxkTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZmllbGROYW1lICsgJyBtdXN0IGJlIG51bGwnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyByZXF1aXJlVW5kZWZpbmVkKGZpZWxkVmFsdWU6IGFueSwgZmllbGROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZpZWxkTmFtZSArICcgbXVzdCBiZSB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyByZXF1aXJlTm90TnVsbChmaWVsZFZhbHVlOiBhbnksIGZpZWxkTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmIChmaWVsZFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZmllbGROYW1lICsgJyBjYW5ub3QgYmUgbnVsbCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHJlcXVpcmVOb3RVbmRlZmluZWQoZmllbGRWYWx1ZTogYW55LCBmaWVsZE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZmllbGROYW1lICsgJyBjYW5ub3QgYmUgdW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcmVxdWlyZU5vdE51bGxOb3JVbmRlZmluZWQoZmllbGRWYWx1ZTogYW55LCBmaWVsZE5hbWU6IHN0cmluZykge1xuICAgICAgICBVdGlscy5yZXF1aXJlTm90TnVsbChmaWVsZFZhbHVlLCBmaWVsZE5hbWUpO1xuICAgICAgICBVdGlscy5yZXF1aXJlTm90VW5kZWZpbmVkKGZpZWxkVmFsdWUsIGZpZWxkTmFtZSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlcXVpcmVOdWxsT3JVbmRlZmluZWQoZmllbGRWYWx1ZTogYW55LCBmaWVsZE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoIVV0aWxzLmlzTnVsbChmaWVsZFZhbHVlKSAmJiAhVXRpbHMuaXNVbmRlZmluZWQoZmllbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihmaWVsZE5hbWUgKyAnIG11c3QgYmUgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyByZXF1aXJlTm90RW1wdHkoZmllbGRWYWx1ZTogYW55LCBmaWVsZE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoVXRpbHMuaXNFbXB0eShmaWVsZFZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZpZWxkTmFtZSArICcgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcmVxdWlyZU5vdE5lZ2F0aXZlKGZpZWxkVmFsdWU6IG51bWJlciwgZmllbGROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZmllbGROYW1lICsgJyBjYW5ub3QgYmUgbmVnYXRpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhcHBlbmRTZWdtZW50KHBhdGg6IHN0cmluZywgc2VnbWVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgVXRpbHMucmVxdWlyZU5vdE51bGxOb3JVbmRlZmluZWQocGF0aCwgJ3BhdGgnKTtcbiAgICAgICAgVXRpbHMucmVxdWlyZU5vdE51bGxOb3JVbmRlZmluZWQoc2VnbWVudCwgJ3NlZ21lbnQnKTtcbiAgICAgICAgaWYgKCFwYXRoLmVuZHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgIHBhdGggKz0gJy8nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudDtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmVtb3ZlRW5kaW5nU2VwYXJhdG9yKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBVdGlscy5yZXF1aXJlTm90TnVsbE5vclVuZGVmaW5lZCh2YWx1ZSwgJ3ZhbHVlJyk7XG4gICAgICAgIGlmICh2YWx1ZS5lbmRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnN1YnN0cmluZygwLCB2YWx1ZS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFZhbHVlVVJJKHZhbHVlOiBib29sZWFuIHwgbnVtYmVyIHwgc3RyaW5nIHwgUXVvdGVkU3RyaW5nLCBlbmNvZGVVUkk6IGJvb2xlYW4pOiBhbnkge1xuICAgICAgICBVdGlscy5yZXF1aXJlTm90VW5kZWZpbmVkKHZhbHVlLCAndmFsdWUnKTtcbiAgICAgICAgVXRpbHMucmVxdWlyZU5vdE51bGxOb3JVbmRlZmluZWQoZW5jb2RlVVJJLCAnZW5jb2RlVVJJJyk7XG5cbiAgICAgICAgbGV0IHJlczogYW55ID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHR5cGVvZiAocmVzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIGVuY29kZSB1cmkgY29tcG9uZW50XG4gICAgICAgICAgICBpZiAoVXRpbHMuaXNOb3ROdWxsTm9yVW5kZWZpbmVkKGVuY29kZVVSSSkgJiYgZW5jb2RlVVJJKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZW5jb2RlVVJJQ29tcG9uZW50KHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzIGluc3RhbmNlb2YgUXVvdGVkU3RyaW5nKSB7XG4gICAgICAgICAgICAvLyBlc2NhcGUgc2luZ2xlIHF1b3RlXG4gICAgICAgICAgICByZXMgPSByZXMudG9TdHJpbmcoKS5yZXBsYWNlKC8nL2csICdcXCdcXCcnKTtcblxuICAgICAgICAgICAgLy8gZW5jb2RlIHVyaSBjb21wb25lbnRcbiAgICAgICAgICAgIGlmIChVdGlscy5pc05vdE51bGxOb3JVbmRlZmluZWQoZW5jb2RlVVJJKSAmJiBlbmNvZGVVUkkpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBlbmNvZGVVUklDb21wb25lbnQocmVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYWRkIHN0YXJ0L2VuZGluZyBxdW90ZXNcbiAgICAgICAgICAgIHJlcyA9ICdcXCcnICsgcmVzICsgJ1xcJyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBib29sZWFuLCBudW1iZXJcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBzdGF0aWMgdG9TdHJpbmcoaXRlbXM6IGFueVtdLCBvcGVyYXRvcj86IE9wZXJhdG9yTG9naWNhbCwgb3BlcmF0b3JVcHBlcmNhc2U6IGJvb2xlYW4gPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgICAgIGxldCByZXMgPSAnJztcbiAgICAgICAgaWYgKFV0aWxzLmlzTnVsbE9yVW5kZWZpbmVkKGl0ZW1zKSB8fCAhaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAocmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChVdGlscy5pc05vdE51bGxOb3JVbmRlZmluZWQob3BlcmF0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdG9yU3RyaW5nOiBzdHJpbmcgPSBVdGlscy5nZXRPcGVyYXRvclN0cmluZyhvcGVyYXRvciwgb3BlcmF0b3JVcHBlcmNhc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXMgKz0gYCAke29wZXJhdG9yU3RyaW5nfSBgO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSAnLCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFV0aWxzLmlzTm90TnVsbE5vclVuZGVmaW5lZChvcGVyYXRvcikgJiYgb3BlcmF0b3IgPT09IE9wZXJhdG9yTG9naWNhbC5OT1QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRvclN0cmluZzogc3RyaW5nID0gVXRpbHMuZ2V0T3BlcmF0b3JTdHJpbmcob3BlcmF0b3IsIG9wZXJhdG9yVXBwZXJjYXNlKTtcbiAgICAgICAgICAgICAgICByZXMgKz0gYCR7b3BlcmF0b3JTdHJpbmd9IGA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcyArPSBpdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFV0aWxzLmlzTm90TnVsbE5vclVuZGVmaW5lZChvcGVyYXRvcikpIHtcbiAgICAgICAgICAgIHJldHVybiBgKCR7cmVzfSlgO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc3RhdGljIGdldE9wZXJhdG9yU3RyaW5nKG9wZXJhdG9yOiBPcGVyYXRvckxvZ2ljYWwsIG9wZXJhdG9yVXBwZXJjYXNlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG9wZXJhdG9yU3RyaW5nOiBzdHJpbmcgPSBPcGVyYXRvckxvZ2ljYWxbb3BlcmF0b3JdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChVdGlscy5pc05vdE51bGxOb3JVbmRlZmluZWQob3BlcmF0b3JVcHBlcmNhc2UpICYmIG9wZXJhdG9yVXBwZXJjYXNlKSB7XG4gICAgICAgICAgICBvcGVyYXRvclN0cmluZyA9IG9wZXJhdG9yU3RyaW5nLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wZXJhdG9yU3RyaW5nO1xuICAgIH1cbn1cbiJdfQ==