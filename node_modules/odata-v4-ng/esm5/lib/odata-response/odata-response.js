/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Utils } from '../utils/utils';
import { EntitySet } from './entity-collection';
import { Metadata } from './metadata';
import { ODataResponseAbstract } from './odata-response-abstract';
import { ODataResponseBatch } from './odata-response-batch';
var ODataResponse = /** @class */ (function (_super) {
    tslib_1.__extends(ODataResponse, _super);
    function ODataResponse(httpResponse) {
        return _super.call(this, httpResponse) || this;
    }
    /**
     * @return {?}
     */
    ODataResponse.prototype.getBodyAsJson = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var contentType = this.getHttpResponse().headers.get('Content-Type');
        if (Utils.isNotNullNorUndefined(contentType) && contentType.includes('json')) {
            try {
                return JSON.parse(this.getBodyAsText());
            }
            catch (error) {
                return null;
            }
        }
        return null;
    };
    /**
     * @return {?}
     */
    ODataResponse.prototype.toMetadata = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var xml = this.getBodyAsText();
        return new Metadata(xml);
    };
    /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    ODataResponse.prototype.toEntitySet = /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var json = this.getBodyAsJson();
        if (Utils.isNotNullNorUndefined(json) && json.hasOwnProperty(ODataResponse.VALUE)) {
            /** @type {?} */
            var count = null;
            if (json.hasOwnProperty(ODataResponse.ODATA_COUNT)) {
                count = json[ODataResponse.ODATA_COUNT];
            }
            return new EntitySet(json[ODataResponse.VALUE], count, type);
        }
        return null;
    };
    /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    ODataResponse.prototype.toComplexCollection = /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var json = this.getBodyAsJson();
        if (Utils.isNotNullNorUndefined(json) && json.hasOwnProperty(ODataResponse.VALUE)) {
            /** @type {?} */
            var res = [];
            try {
                for (var _a = tslib_1.__values(json[ODataResponse.VALUE]), _b = _a.next(); !_b.done; _b = _a.next()) {
                    var object = _b.value;
                    res.push(this.toObject(object, type));
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return res;
        }
        return null;
        var e_1, _c;
    };
    /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    ODataResponse.prototype.toEntity = /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var json = this.getBodyAsJson();
        return this.toObject(json, type);
    };
    /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    ODataResponse.prototype.toComplexValue = /**
     * @template T
     * @param {?=} type
     * @return {?}
     */
    function (type) {
        /** @type {?} */
        var json = this.getBodyAsJson();
        return this.toObject(json, type);
    };
    /**
     * @template T
     * @return {?}
     */
    ODataResponse.prototype.toPropertyValue = /**
     * @template T
     * @return {?}
     */
    function () {
        /** @type {?} */
        var json = this.getBodyAsJson();
        if (Utils.isNotNullNorUndefined(json)) {
            if (json.hasOwnProperty(ODataResponse.VALUE)) {
                return /** @type {?} */ (json[ODataResponse.VALUE]);
            }
            return null;
        }
        else {
            return /** @type {?} */ (JSON.parse(this.getBodyAsText()));
        }
    };
    /**
     * @return {?}
     */
    ODataResponse.prototype.toCount = /**
     * @return {?}
     */
    function () {
        return Number(this.getBodyAsText());
    };
    /**
     * @return {?}
     */
    ODataResponse.prototype.toODataResponseBatch = /**
     * @return {?}
     */
    function () {
        return new ODataResponseBatch(this.getHttpResponse());
    };
    /**
     * @template T
     * @param {?} object
     * @param {?} type
     * @return {?}
     */
    ODataResponse.prototype.toObject = /**
     * @template T
     * @param {?} object
     * @param {?} type
     * @return {?}
     */
    function (object, type) {
        if (Utils.isNotNullNorUndefined(object)) {
            if (Utils.isNullOrUndefined(type)) {
                return Object.assign({}, object);
            }
            else {
                return Object.assign(new type(), object);
            }
        }
        return null;
    };
    ODataResponse.VALUE = 'value';
    ODataResponse.ODATA_COUNT = '@odata.count';
    return ODataResponse;
}(ODataResponseAbstract));
export { ODataResponse };
if (false) {
    /** @type {?} */
    ODataResponse.VALUE;
    /** @type {?} */
    ODataResponse.ODATA_COUNT;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2RhdGEtcmVzcG9uc2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9vZGF0YS12NC1uZy8iLCJzb3VyY2VzIjpbImxpYi9vZGF0YS1yZXNwb25zZS9vZGF0YS1yZXNwb25zZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDaEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUN0QyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQzs7SUFFekIseUNBQXFCO0lBSXBELHVCQUFZLFlBQWtDO2VBQzFDLGtCQUFNLFlBQVksQ0FBQztLQUN0Qjs7OztJQUVELHFDQUFhOzs7SUFBYjs7UUFDSSxJQUFNLFdBQVcsR0FBVyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMvRSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsV0FBVyxDQUFDLElBQUksV0FBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0UsSUFBSSxDQUFDO2dCQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO2FBQzNDO1lBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQzthQUNmO1NBQ0o7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0tBQ2Y7Ozs7SUFFRCxrQ0FBVTs7O0lBQVY7O1FBQ0ksSUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3pDLE1BQU0s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SUFFRCw0Q0FBb0I7OztJQUFwQjtRQUNJLE1BQU0sQ0FBQyxJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDO0tBQ3pEOzs7Ozs7O0lBRVMsZ0NBQVE7Ozs7OztJQUFsQixVQUFzQixNQUFXLEVBQUUsSUFBbUI7UUFDbEQsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDcEM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQzVDO1NBQ0o7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDO0tBQ2Y7MEJBekYrQixPQUFPO2dDQUNELGNBQWM7d0JBVnhEO0VBUW1DLHFCQUFxQjtTQUEzQyxhQUFhIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cFJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IEVudGl0eVNldCB9IGZyb20gJy4vZW50aXR5LWNvbGxlY3Rpb24nO1xuaW1wb3J0IHsgTWV0YWRhdGEgfSBmcm9tICcuL21ldGFkYXRhJztcbmltcG9ydCB7IE9EYXRhUmVzcG9uc2VBYnN0cmFjdCB9IGZyb20gJy4vb2RhdGEtcmVzcG9uc2UtYWJzdHJhY3QnO1xuaW1wb3J0IHsgT0RhdGFSZXNwb25zZUJhdGNoIH0gZnJvbSAnLi9vZGF0YS1yZXNwb25zZS1iYXRjaCc7XG5cbmV4cG9ydCBjbGFzcyBPRGF0YVJlc3BvbnNlIGV4dGVuZHMgT0RhdGFSZXNwb25zZUFic3RyYWN0IHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBWQUxVRSA9ICd2YWx1ZSc7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgT0RBVEFfQ09VTlQgPSAnQG9kYXRhLmNvdW50JztcblxuICAgIGNvbnN0cnVjdG9yKGh0dHBSZXNwb25zZTogSHR0cFJlc3BvbnNlPHN0cmluZz4pIHtcbiAgICAgICAgc3VwZXIoaHR0cFJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBnZXRCb2R5QXNKc29uKCk6IGFueSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlOiBzdHJpbmcgPSB0aGlzLmdldEh0dHBSZXNwb25zZSgpLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKTtcbiAgICAgICAgaWYgKFV0aWxzLmlzTm90TnVsbE5vclVuZGVmaW5lZChjb250ZW50VHlwZSkgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2pzb24nKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmdldEJvZHlBc1RleHQoKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRvTWV0YWRhdGEoKTogTWV0YWRhdGEge1xuICAgICAgICBjb25zdCB4bWw6IHN0cmluZyA9IHRoaXMuZ2V0Qm9keUFzVGV4dCgpO1xuICAgICAgICByZXR1cm4gbmV3IE1ldGFkYXRhKHhtbCk7XG4gICAgfVxuXG4gICAgdG9FbnRpdHlTZXQ8VD4odHlwZT86IChuZXcgKCkgPT4gVCkpOiBFbnRpdHlTZXQ8VD4ge1xuICAgICAgICBjb25zdCBqc29uOiBhbnkgPSB0aGlzLmdldEJvZHlBc0pzb24oKTtcbiAgICAgICAgaWYgKFV0aWxzLmlzTm90TnVsbE5vclVuZGVmaW5lZChqc29uKSAmJiBqc29uLmhhc093blByb3BlcnR5KE9EYXRhUmVzcG9uc2UuVkFMVUUpKSB7XG4gICAgICAgICAgICBsZXQgY291bnQ6IG51bWJlciA9IG51bGw7XG4gICAgICAgICAgICBpZiAoanNvbi5oYXNPd25Qcm9wZXJ0eShPRGF0YVJlc3BvbnNlLk9EQVRBX0NPVU5UKSkge1xuICAgICAgICAgICAgICAgIGNvdW50ID0ganNvbltPRGF0YVJlc3BvbnNlLk9EQVRBX0NPVU5UXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRW50aXR5U2V0PFQ+KGpzb25bT0RhdGFSZXNwb25zZS5WQUxVRV0sIGNvdW50LCB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0b0NvbXBsZXhDb2xsZWN0aW9uPFQ+KHR5cGU/OiAobmV3ICgpID0+IFQpKTogVFtdIHtcbiAgICAgICAgY29uc3QganNvbjogYW55ID0gdGhpcy5nZXRCb2R5QXNKc29uKCk7XG5cbiAgICAgICAgaWYgKFV0aWxzLmlzTm90TnVsbE5vclVuZGVmaW5lZChqc29uKSAmJiBqc29uLmhhc093blByb3BlcnR5KE9EYXRhUmVzcG9uc2UuVkFMVUUpKSB7XG4gICAgICAgICAgICBjb25zdCByZXM6IFRbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvYmplY3Qgb2YganNvbltPRGF0YVJlc3BvbnNlLlZBTFVFXSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHRoaXMudG9PYmplY3Q8VD4ob2JqZWN0LCB0eXBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdG9FbnRpdHk8VD4odHlwZT86IChuZXcgKCkgPT4gVCkpOiBUIHtcbiAgICAgICAgY29uc3QganNvbjogYW55ID0gdGhpcy5nZXRCb2R5QXNKc29uKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRvT2JqZWN0PFQ+KGpzb24sIHR5cGUpO1xuICAgIH1cblxuICAgIHRvQ29tcGxleFZhbHVlPFQ+KHR5cGU/OiAobmV3ICgpID0+IFQpKTogVCB7XG4gICAgICAgIGNvbnN0IGpzb246IGFueSA9IHRoaXMuZ2V0Qm9keUFzSnNvbigpO1xuICAgICAgICByZXR1cm4gdGhpcy50b09iamVjdDxUPihqc29uLCB0eXBlKTtcbiAgICB9XG5cbiAgICB0b1Byb3BlcnR5VmFsdWU8VD4oKTogVCB7XG4gICAgICAgIGNvbnN0IGpzb246IGFueSA9IHRoaXMuZ2V0Qm9keUFzSnNvbigpO1xuICAgICAgICBpZiAoVXRpbHMuaXNOb3ROdWxsTm9yVW5kZWZpbmVkKGpzb24pKSB7XG4gICAgICAgICAgICBpZiAoanNvbi5oYXNPd25Qcm9wZXJ0eShPRGF0YVJlc3BvbnNlLlZBTFVFKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiA8VD5qc29uW09EYXRhUmVzcG9uc2UuVkFMVUVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gPFQ+SlNPTi5wYXJzZSh0aGlzLmdldEJvZHlBc1RleHQoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b0NvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5nZXRCb2R5QXNUZXh0KCkpO1xuICAgIH1cblxuICAgIHRvT0RhdGFSZXNwb25zZUJhdGNoKCk6IE9EYXRhUmVzcG9uc2VCYXRjaCB7XG4gICAgICAgIHJldHVybiBuZXcgT0RhdGFSZXNwb25zZUJhdGNoKHRoaXMuZ2V0SHR0cFJlc3BvbnNlKCkpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB0b09iamVjdDxUPihvYmplY3Q6IGFueSwgdHlwZTogKG5ldyAoKSA9PiBUKSk6IFQge1xuICAgICAgICBpZiAoVXRpbHMuaXNOb3ROdWxsTm9yVW5kZWZpbmVkKG9iamVjdCkpIHtcbiAgICAgICAgICAgIGlmIChVdGlscy5pc051bGxPclVuZGVmaW5lZCh0eXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvYmplY3QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdHlwZSgpLCBvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdfQ==